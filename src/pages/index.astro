---
import Layout from '../layouts/Layout.astro';
---

<Layout title="BIG CORNER - Hamburguesas">
  <section class="hero">
    <div class="hero-content">
      <div class="hero-text">
        <h1>Las mejores hamburguesas al mejor precio</h1>
        <p>De jueves a domingo de 20:00 a 00:30</p>
        <div style="margin-top: 1rem">
          <a class="btn hero-btn" href="https://wa.me/5491132776974" target="_blank">Hacenos tu pedido</a>
        </div>
      </div>
      <div class="hero-image">
        <img src="/images/logo.png" alt="Logo BIG CORNER" style="max-width: 200px; border-radius: 12px;" />
      </div>
    </div>
  </section>

  <section class="menu" id="menu">
    <h2>Menú</h2>
    <p class="menu-subtitle">Tu pedido está a solo unos clicks y te lo llevamos a domicilio</p>
    <div class="burger-list" id="burger-list"></div>
  </section>

  <section class="about" id="about">
    <h2>Sobre Nosotros</h2>
    <p>Somos BIG CORNER, una hamburguesería de barrio con pasión por el sabor. Cada producto es hecho con ingredientes frescos, pan artesanal y recetas que te van a dejar con ganas de más.</p>
  </section>

  <section class="reviews" id="reviews">
    <h2>Lo que dicen nuestros clientes</h2>
    <div id="reviews-container"></div>
  </section>

  <div id="burger-modal" class="modal hidden">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="modal-img" src="" alt="Hamburguesa" />
      <h3 id="modal-title"></h3>
      <p id="modal-description"></p>
      <form id="order-form" onsubmit="sendOrder(event)">
        <label for="quantity">Cantidad:</label>
        <input type="number" id="quantity" name="quantity" min="1" value="1" required />

        <label for="address">Dirección de entrega:</label>
        <input type="text" id="address" name="address" required />

        <label for="comment">Comentario adicional:</label>
        <textarea id="comment" name="comment"></textarea>

        <input type="hidden" id="product-name" name="product-name" />
        <button type="submit">Pedir por WhatsApp</button>
      </form>
    </div>
  </div>

  <section class="contact" id="contact">
    <h2>Contacto</h2>
    <p>Contactanos por nuestras redes sociales o hacé tu pedido directamente.</p>
    <div class="contact-methods">
      <a href="https://wa.me/5491132776974" target="_blank">
        <img src="/images/whatsapp-icon.png" alt="WhatsApp" class="icon" />
      </a>
      <a href="https://instagram.com/bigcorner2024" target="_blank">
        <img src="/images/instagram-icon.png" alt="Instagram" class="icon" />
      </a>
    </div>
  </section>

  <footer class="footer">
    <p>
      Sitio desarrollado por <a href="https://marketing-bso.netlify.app/" target="_blank" style="color: inherit; text-decoration: underline;">BSO Web Studio</a>
    </p>
    <p>&copy; <script>document.write(new Date().getFullYear())</script> BIG CORNER. Todos los derechos reservados.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="/scripts/modal.js" type="module"></script>
  <script>
    fetch('https://docs.google.com/spreadsheets/d/1oSXRJkVeD3napDd9bltITSA4snw4uqOgXzLtfav05yo/gviz/tq?tqx=out:csv')
      .then(res => res.text())
      .then(csvText => {
        const parsed = Papa.parse(csvText, { header: true });
        const rows = parsed.data;

        const products = rows.filter(r => r.name && r.image).map(r => ({
          name: r.name,
          description: r.description,
          image: r.image,
          price: r.price
        }));

        const whatsappRow = rows.find(r => r.whatsapp);
        const whatsapp = whatsappRow?.whatsapp?.trim() || '5491132776974';
        window.dynamicWhatsapp = whatsapp;
        window.dynamicProducts = products;

        const list = document.getElementById('burger-list');
        list.innerHTML = products.map((product, index) => `
          <div class="burger-card" onclick="openModalFromList(${index})">
            <img src="${product.image}" alt="${product.name}" />
            <h3>${product.name}</h3>
            <p>${product.description}</p>
            <p class="price">$${product.price}</p>
          </div>
        `).join('');

        const reviews = rows
          .filter(r => r.reviews && r.reviews.includes('|'))
          .map(r => {
            const [quote, author] = r.reviews.split('|');
            return `<div class="review"><p>“${quote.trim()}”</p><span>- ${author.trim()}</span></div>`;
          });

        document.getElementById('reviews-container').innerHTML = reviews.join('');
      });
  </script>
</Layout>
